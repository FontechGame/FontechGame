(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[568],{4184:function(e,n){var r;!function(){"use strict";var t={}.hasOwnProperty;function o(){for(var e=[],n=0;n<arguments.length;n++){var r=arguments[n];if(r){var c=typeof r;if("string"===c||"number"===c)e.push(r);else if(Array.isArray(r)){if(r.length){var i=o.apply(null,r);i&&e.push(i)}}else if("object"===c)if(r.toString===Object.prototype.toString)for(var u in r)t.call(r,u)&&r[u]&&e.push(u);else e.push(r.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(n,[]))||(e.exports=r)}()},4768:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tetris",function(){return r(7730)}])},1242:function(e,n,r){"use strict";var t=r(5893),o=(r(7294),r(4184)),c=r.n(o);function i(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function u(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},c=Object.keys(e);for(t=0;t<c.length;t++)r=c[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(t=0;t<c.length;t++)r=c[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}n.Z=function(e){var n=e.children,r=e.className,o=u(e,["children","className"]);return(0,t.jsx)("button",function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){i(e,n,r[n])}))}return e}({className:c()(r,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded","focus:outline-none","focus:shadow-outline")},o,{children:n}))}},7730:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return R}});var t=r(5893),o=r(7294),c=r(8520),i=r.n(c),u=r(4184),a=r.n(u),s=r(5590),f=function(e){var n=e.containerClassName,r=e.blockClassName,o=e.blockKey,c=void 0===o?"tetris-item":o,i=e.count,u=void 0===i?800:i,f=e.activeBlockIndexes,d=void 0===f?Array():f;return(0,t.jsx)("div",{className:a()("flex","flex-row","flex-wrap","w-[280px]","h-[560px]","m-2",n),children:Array(u).fill(0).map((function(e,n){return(0,t.jsx)("div",{className:a()("".concat(c,"-").concat(n+1),"w-[14px]","h-[14px]",r),children:(0,t.jsx)("div",{className:a()("inline-block","w-full","h-full","m-px","border","border-transparent","bg-transparent",(0,s.gR)({index:n+1,activeBlockIndexes:d})&&["border-white","bg-black"])})},"".concat(c,"-").concat(n+1))}))})},d=r(9903),l=function(){var e=(0,d.v9)((function(e){return{isLose:e.tetrisManagerState.isLose,count:e.tetrisManagerState.count,reminderBlockIndexes:e.tetrisManagerState.reminderBlockIndexes,currentBlockIndexes:e.tetrisManagerState.currentBlockIndexes}}),d.wU),n=e.isLose,r=e.count,t=e.reminderBlockIndexes,c=e.currentBlockIndexes,i=o.useMemo((function(){return(0,s.e)({currentArray:t,targetArray:c})}),[t,c]);return{isLose:n,count:r,reminderBlockIndexes:t,currentBlockIndexes:c,activeBlockIndexes:i}},p=r(7492),v=function(e){return{type:p.r.UPDATE_ISLOSE,isLose:e}},y=function(e){return{type:p.r.UPDATE_CURRENT,currentBlockIndexes:e}},x=function(e){return{type:p.r.UPDATE_REMINDER,reminderBlockIndexes:e}};function h(e,n,r,t,o,c,i){try{var u=e[c](i),a=u.value}catch(s){return void r(s)}u.done?n(a):Promise.resolve(a).then(t,o)}function m(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var c=e.apply(n,r);function i(e){h(c,t,o,i,u,"next",e)}function u(e){h(c,t,o,i,u,"throw",e)}i(void 0)}))}}var w=function(){var e=(0,d.I0)(),n=m(i().mark((function n(r){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e(v(r));case 2:case"end":return n.stop()}}),n)}))),r=m(i().mark((function n(r){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e(y(r));case 2:case"end":return n.stop()}}),n)}))),t=m(i().mark((function n(r){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e(x(r));case 2:case"end":return n.stop()}}),n)})));return{doAsyncUpdateIsLose:n,doAsyncUpdateCurrentBlock:r,doAsyncReminderDeleteLines:m(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e({type:p.r.REMINDER_DELETE_LINES});case 2:case"end":return n.stop()}}),n)}))),doAsyncUpdateReminderBlock:t,doAsyncClearTetris:m(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e({type:p.r.CLEAR});case 2:case"end":return n.stop()}}),n)})))}},k=[[1,2,3,4],[2,21,22,23],[1,21,22,23],[1,2,21,22],[1,2,22,23]];function b(e,n,r,t,o,c,i){try{var u=e[c](i),a=u.value}catch(s){return void r(s)}u.done?n(a):Promise.resolve(a).then(t,o)}function A(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var c=e.apply(n,r);function i(e){b(c,t,o,i,u,"next",e)}function u(e){b(c,t,o,i,u,"throw",e)}i(void 0)}))}}function B(e){return function(e){if(Array.isArray(e)){for(var n=0,r=new Array(e.length);n<e.length;n++)r[n]=e[n];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var C=function(){var e=l(),n=e.isLose,r=e.count,t=e.reminderBlockIndexes,o=e.currentBlockIndexes,c=(e.activeBlockIndexes,w()),u=c.doAsyncUpdateIsLose,a=c.doAsyncUpdateCurrentBlock,s=c.doAsyncUpdateReminderBlock,f=c.doAsyncReminderDeleteLines,d=c.doAsyncClearTetris,p=A(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(!1);case 2:return e.next=4,d();case 4:case"end":return e.stop()}}),e)}))),v=A(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=k[Math.floor(Math.random()*k.length)])){e.next=4;break}return e.next=4,a(B(n));case 4:case"end":return e.stop()}}),e)}))),y=A(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(o);case 2:if(!o.find((function(e){return e<80}))){e.next=6;break}return e.next=5,u(!0);case 5:return e.abrupt("return");case 6:return e.next=8,f();case 8:return e.next=10,v();case 10:case"end":return e.stop()}}),e)})));return{initTetris:p,doAsyncUpdateCurrentBlockByRandom:v,dropDownCurrentBlock:function(){n||0!==o.length&&(t.find((function(e){return e<80}))?u(!0):o.find((function(e){return t.find((function(n){return e+20==n}))}))||o.find((function(e){return e+20>r}))?y():a(o.map((function(e){return e+20}))))},updateCurrentBlockWithKeyCode:function(e){if(!n)if("ArrowDown"!=e)if("ArrowUp"!=e)if("ArrowRight"!=e)if("ArrowLeft"!=e);else{if(o.find((function(e){return(e-1)%20==0})))return;if(o.find((function(e){return t.find((function(n){return e-1==n}))})))return;a(o.map((function(e){return e-1})))}else{if(o.find((function(e){return(e+1)%20==1})))return;if(o.find((function(e){return t.find((function(n){return e+1==n}))})))return;a(o.map((function(e){return e+1})))}else console.log("do ArrowDown");else console.log("do ArrowDown")}}};function g(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=[],t=!0,o=!1,c=void 0;try{for(var i,u=e[Symbol.iterator]();!(t=(i=u.next()).done)&&(r.push(i.value),!n||r.length!==n);t=!0);}catch(a){o=!0,c=a}finally{try{t||null==u.return||u.return()}finally{if(o)throw c}}return r}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var I=function(){var e=g(o.useState(void 0),2),n=e[0],r=e[1],t=function(e){r(e.code)};return o.useEffect((function(){return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[]),{keyCode:n,setKeyCode:r}},j=function(){var e=l(),n=e.isLose,r=e.count,t=e.activeBlockIndexes,o=C(),c=o.doAsyncUpdateCurrentBlockByRandom,i=o.dropDownCurrentBlock,u=o.updateCurrentBlockWithKeyCode,a=I();return{isLose:n,count:r,activeBlockIndexes:t,doAsyncUpdateCurrentBlockByRandom:c,dropDownCurrentBlock:i,updateCurrentBlockWithKeyCode:u,keyCode:a.keyCode,setKeyCode:a.setKeyCode}};function E(e,n,r,t,o,c,i){try{var u=e[c](i),a=u.value}catch(s){return void r(s)}u.done?n(a):Promise.resolve(a).then(t,o)}var L=function(){var e=j(),n=e.isLose,r=e.count,c=e.activeBlockIndexes,u=e.doAsyncUpdateCurrentBlockByRandom,a=e.dropDownCurrentBlock,s=e.updateCurrentBlockWithKeyCode,d=e.keyCode,l=e.setKeyCode;o.useEffect((function(){u()}),[]);var p=o.useCallback((function(){var e;(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=3;break}return a(),e.abrupt("return");case 3:s(d),l(void 0);case 5:case"end":return e.stop()}}),e)})),function(){var n=this,r=arguments;return new Promise((function(t,o){var c=e.apply(n,r);function i(e){E(c,t,o,i,u,"next",e)}function u(e){E(c,t,o,i,u,"throw",e)}i(void 0)}))})()}),[d,a,s]);return o.useEffect((function(){var e=setInterval((function(){n||p()}),100);return function(){clearInterval(e)}}),[n,p]),(0,t.jsx)("div",{className:"pt-[64px]",children:(0,t.jsxs)("div",{className:"relative flex mt-4",children:[(0,t.jsx)("div",{className:"absolute inset top-[64px] bottom-0 left-0 right-0 border-x border-b border-[cyan]"}),(0,t.jsx)(f,{count:r,activeBlockIndexes:c})]})})},N=r(1242),O=function(){var e=l().isLose,n=w().doAsyncUpdateIsLose,r=C();return{isLose:e,initTetris:r.initTetris,doAsyncUpdateIsLose:n,doAsyncUpdateCurrentBlockByRandom:r.doAsyncUpdateCurrentBlockByRandom}};function U(e,n,r,t,o,c,i){try{var u=e[c](i),a=u.value}catch(s){return void r(s)}u.done?n(a):Promise.resolve(a).then(t,o)}var P=function(){var e=O(),n=e.isLose,r=e.initTetris,o=e.doAsyncUpdateIsLose,c=e.doAsyncUpdateCurrentBlockByRandom;if(!n)return(0,t.jsx)("div",{children:"AAA"});var u,a=(u=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:return e.next=4,o(!1);case 4:return e.next=6,c();case 6:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(r,t){var o=u.apply(e,n);function c(e){U(o,r,t,c,i,"next",e)}function i(e){U(o,r,t,c,i,"throw",e)}c(void 0)}))});return(0,t.jsx)(N.Z,{onClick:function(){return a()},children:"You Lose, Clear Tetris"})},R=function(){return(0,t.jsx)("div",{className:"p-4",children:(0,t.jsxs)("div",{className:"flex flex-col w-[300px]",children:[(0,t.jsx)("div",{className:"text-white",children:"Tetris"}),(0,t.jsx)(P,{}),(0,t.jsx)(L,{})]})})}}},function(e){e.O(0,[774,888,179],(function(){return n=4768,e(e.s=n);var n}));var n=e.O();_N_E=n}]);